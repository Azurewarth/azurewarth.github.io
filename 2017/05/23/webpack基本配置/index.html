<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"name="viewport">
  <title>Azurewarth</title>
  <link rel="stylesheet" href="/./css/style.css">
  <script src="/./js/canvas.js"></script>
</head>
  <body>
    <header class="header">
    <div class="blog-title">
        <a href="https://github.com/Azurewarth" class="logo">Azurewarth</a>
    </div>
    <div class="blog-subtitle">
        resume &amp; blog -- 247
    </div>
    <ul class="menu">
        
        <li class="menu-item">
            <a href="/" class="menu-item-link">Home</a>
        </li>
        
        <li class="menu-item">
            <a href="/archives" class="menu-item-link">Archive</a>
        </li>
        
        <li class="menu-item">
            <a href="https://github.com/Azurewarth" class="menu-item-link">Github</a>
        </li>
        
    </ul> 
</header> 

    <main class="main">
      <article class="post">
  <div class="post-title">
    <h2 class="title">webpack基本配置</h2>
  </div>
   <div class="post-meta">
    <span class="post-time"></span>
  </div>
  <div class="post-content">
    <h5 id="webpack是目前流行打包工具，适合单页应用，也可以用于多页应用的打包。不像之前的一些打包工具，webpack只需要写清楚配置文件就可以正常的执行工作"><a href="#webpack是目前流行打包工具，适合单页应用，也可以用于多页应用的打包。不像之前的一些打包工具，webpack只需要写清楚配置文件就可以正常的执行工作" class="headerlink" title="webpack是目前流行打包工具，适合单页应用，也可以用于多页应用的打包。不像之前的一些打包工具，webpack只需要写清楚配置文件就可以正常的执行工作"></a>webpack是目前流行打包工具，适合单页应用，也可以用于多页应用的打包。不像之前的一些打包工具，webpack只需要写清楚配置文件就可以正常的执行工作</h5><a id="more"></a>
<p><strong><em>webpack</em></strong>文件一般命名为<strong><em>webpack.config.js</em></strong>，位于根目录下。<strong><em>webpack</em></strong>配置文件主要分为几大模块。</p>
<h5 id="1-引入所需要的组件"><a href="#1-引入所需要的组件" class="headerlink" title="1. 引入所需要的组件"></a>1. 引入所需要的组件</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">const</span> path    = <span class="built_in">require</span>(<span class="string">"path"</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> autoprefixer             = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>);</div><div class="line"><span class="keyword">const</span> ExtractTextPlugin        = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</div><div class="line"><span class="keyword">const</span> InlineChunkWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-inline-chunk-plugin'</span>);</div><div class="line"><span class="keyword">const</span> HtmlWebpackPlugin        = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="keyword">const</span> CommonsChunkPlugin       = webpack.optimize.CommonsChunkPlugin;</div><div class="line"><span class="keyword">const</span> AggressiveMergingPlugin  = webpack.optimize.AggressiveMergingPlugin;</div></pre></td></tr></table></figure>
<p><strong>webpack</strong>：基本webpack包。</p>
<p><strong>path</strong>: 路径工具包。</p>
<p><strong>autoprefixer</strong>：css添加前缀，修复语法差异。</p>
<p><strong>extract-text-webpack-plugin</strong>： 该插件的主要是为了抽离css样式,防止将样式打包在js中引起页面样式加载错乱的现象。</p>
<p><strong>html-webpack-inline-chunk-plugin</strong> &amp;&amp; <strong>html-webpack-plugin</strong>： 创建一个html入口文件，插入打包生成的js，css文件等。</p>
<p><strong>webpack.optimize.CommonsChunkPlugin</strong>： webpack的插件，优化提取公共模块。</p>
<p><strong>webpack.optimize.AggressiveMergingPlugin</strong>： 解决代码打包后冗余的问题。</p>
<h5 id="2-webpack的主题配置"><a href="#2-webpack的主题配置" class="headerlink" title="2. webpack的主题配置"></a>2. webpack的主题配置</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="comment">//文件入口配置</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">index</span>: [</div><div class="line">            <span class="built_in">require</span>.resolve(<span class="string">'./polyfills'</span>),</div><div class="line">            <span class="string">"./src/index.js"</span>, </div><div class="line">        ],</div><div class="line">        <span class="attr">vendor</span>: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'react-router'</span>, <span class="string">'react-router-dom'</span>]</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//文件输出配置</span></div><div class="line">    output: &#123;</div><div class="line">        <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'../public/pc'</span>),   <span class="comment">//打包输出目录</span></div><div class="line">        publicPath: <span class="string">'/'</span>,</div><div class="line">        <span class="attr">filename</span>: <span class="string">'js/[name].[hash:8].js'</span>,</div><div class="line">        <span class="attr">chunkFilename</span>: <span class="string">'js/[id].chunk.[hash:8].js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//加载器配置</span></div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        <span class="attr">rules</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">exclude</span>: [</div><div class="line">              <span class="regexp">/\.html$/</span>,</div><div class="line">              /\.(js|jsx)$/,</div><div class="line">              /\.less$/,</div><div class="line">              /\.css$/,</div><div class="line">              /\.json$/,</div><div class="line">              /\.svg$/,</div><div class="line">              /\.png$/,</div><div class="line">            ],</div><div class="line">            <span class="attr">loader</span>: <span class="string">'url-loader'</span>,</div><div class="line">            <span class="attr">query</span>: &#123;</div><div class="line">              <span class="attr">limit</span>: <span class="number">10000</span>,</div><div class="line">              <span class="attr">name</span>: <span class="string">'static/media/[name].[hash:8].[ext]'</span></div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">            <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</div><div class="line">            <span class="attr">loader</span>: <span class="string">"babel-loader"</span>,</div><div class="line">            <span class="attr">query</span>: &#123;</div><div class="line">                <span class="attr">plugins</span>: [</div><div class="line">                  [<span class="string">'import'</span>, [&#123; <span class="attr">libraryName</span>: <span class="string">"antd"</span>, <span class="attr">style</span>: <span class="literal">true</span> &#125;]],</div><div class="line">                ],</div><div class="line">                <span class="attr">cacheDirectory</span>: <span class="literal">true</span>,</div><div class="line">            &#125;</div><div class="line">          &#125;,</div><div class="line">        &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'style-loader!css-loader!postcss-loader!less-loader'</span></div><div class="line">      &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">            <span class="attr">loader</span>: ExtractTextPlugin.extract(&#123;</div><div class="line">                <span class="attr">fallback</span>: <span class="string">'style-loader'</span>,</div><div class="line">                <span class="attr">loader</span>: [</div><div class="line">                &#123;</div><div class="line">                    <span class="attr">loader</span>: <span class="string">'css-loader'</span></div><div class="line">                &#125;, &#123;</div><div class="line">                    <span class="attr">loader</span>: <span class="string">'postcss-loader'</span></div><div class="line">                &#125;]</div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.json$/</span>,</div><div class="line">            <span class="attr">loader</span>: <span class="string">'json-loader'</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif)$/i</span>,</div><div class="line">            <span class="attr">loader</span>: <span class="string">'url-loader'</span>,</div><div class="line">            <span class="attr">options</span>: &#123;</div><div class="line">                <span class="attr">limit</span>: <span class="number">8192</span>,</div><div class="line">                <span class="attr">name</span>:<span class="string">'images/[name].[hash:8].[ext]'</span></div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|ttf|eot|svg)(\?v=[0-9]\.[0-9]\.[0-9])?$/i</span>,</div><div class="line">            <span class="attr">use</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">loader</span>: <span class="string">'file-loader'</span>,</div><div class="line">                <span class="attr">options</span>: &#123;</div><div class="line">                    <span class="attr">name</span>:<span class="string">'images/[name]-[hash:6].[ext]'</span></div><div class="line">                &#125;</div><div class="line">            &#125;]</div><div class="line">        &#125;]</div><div class="line">    &#125;,</div><div class="line">  	<span class="comment">//插件项</span></div><div class="line">    plugins: [</div><div class="line">        <span class="keyword">new</span> CommonsChunkPlugin(&#123;</div><div class="line">            <span class="attr">name</span>:[<span class="string">'manifest'</span>, <span class="string">'vendor'</span>].reverse(),</div><div class="line">            <span class="attr">minChunks</span>: <span class="literal">Infinity</span></div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">alwaysWriteToDisk</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">filename</span>: <span class="string">'index.html'</span>,</div><div class="line">            <span class="attr">template</span>: <span class="string">'./public/index.html'</span>, <span class="comment">//html模板路径</span></div><div class="line">            chunks: [<span class="string">'manifest'</span>, <span class="string">'vendor'</span>, <span class="string">'index'</span>],  <span class="comment">// manifest: 可以理解为模块清单，载货单.</span></div><div class="line">            inject: <span class="literal">true</span>,</div><div class="line">            <span class="attr">minify</span>: &#123;</div><div class="line">                 <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">removeRedundantAttributes</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">useShortDoctype</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">removeEmptyAttributes</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">removeStyleLinkTypeAttributes</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">keepClosingSlash</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">minifyJS</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">minifyCSS</span>: <span class="literal">true</span>,</div><div class="line">                 <span class="attr">minifyURLs</span>: <span class="literal">true</span>,</div><div class="line">            &#125;,</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.HashedModuleIdsPlugin(),    <span class="comment">//稳定chunkhash</span></div><div class="line">        <span class="keyword">new</span> AggressiveMergingPlugin(),          <span class="comment">//Merge chunks</span></div><div class="line">        <span class="keyword">new</span> InlineChunkWebpackPlugin(&#123;</div><div class="line">            <span class="attr">inlineChunks</span>: [<span class="string">'manifest'</span>]</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> ExtractTextPlugin(&#123;</div><div class="line">            <span class="attr">filename</span>: <span class="string">'css/[name].[contenthash:8].css'</span></div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</div><div class="line">            <span class="attr">options</span>: &#123;</div><div class="line">                <span class="attr">postcss</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> [autoprefixer];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">            <span class="attr">compress</span>: &#123;</div><div class="line">                <span class="attr">warnings</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">drop_debugger</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">drop_console</span>: <span class="literal">true</span></div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">            <span class="string">"process.env"</span>: &#123;</div><div class="line">                <span class="attr">NODE_ENV</span>: <span class="built_in">JSON</span>.stringify(process.env.NODE_ENV || <span class="string">'development'</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</div><div class="line">    ],</div><div class="line">    <span class="attr">resolve</span>: &#123;</div><div class="line">        <span class="attr">extensions</span>: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>, <span class="string">'.less'</span>, <span class="string">'.css'</span>],</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在主题配置中，主要分成以下几个部分。</p>
<p><strong>2.1 入口</strong></p>
<p><strong>entry</strong>或当有多个入口的时候使用<strong>entries</strong>。每一个入口都有一个单独的名字，以便打包时文件的一一对应。</p>
<p>其中，<strong>index</strong>代表入口文件名，<strong>require.resolve(‘./polyfills’)</strong>用于解决<strong>es6</strong>兼容问题。<strong>vendor</strong>内是使用的其他框架（以上以react为例）。</p>
<p><strong>2.2 出口</strong></p>
<p><strong>path</strong>：是打包后生成的打包文件存放的位置。</p>
<p><strong>publicPath</strong>：<strong>url</strong>中代表的相对位置。 </p>
<p><strong>filename</strong>：生成的<strong>js</strong>文件的文件名，比如<strong>js/[name].[hash:8].js</strong>，其中<strong>[name]</strong>就代表了入口设置的文件名。</p>
<p><strong>chunkFilename</strong>：<strong>chunk</strong>优化后文件的文件名。</p>
<p><strong>2.3 加载器</strong></p>
<p><strong>module</strong>：所有加载器都放于<strong>module</strong>对象里面。</p>
<p><strong>rules</strong>： 定义所有的打包规则。其中<strong>exclude</strong>内代表加载器不打包的文件，<strong>include</strong>代表打包的目录或指定文件。加载器方法写在每一个对象中。<strong>test</strong>代表处理的文件；<strong>loader</strong>使用的加载器，如果使用多个加载器，处理的顺序是由后到前；<strong>query</strong>加载器中的其他参数。</p>
<p>其中，<strong>css</strong>加载器，<strong>loader</strong>中加入之前引入的<strong>ExtractTextPlugin</strong>以便提取<strong>css</strong>文件，在<strong>plugins</strong>中也要定义，不然不起作用。</p>
<p><strong>2.4 插件</strong></p>
<p><strong>plugins</strong>：加载过程中用到的插件都写在<strong>plugins</strong>中。<strong>plugins</strong>的值为数组，其中插件的定义使用<strong>new</strong>关键词。（如上文代码）</p>
<p><strong>2.5 解析</strong></p>
<p><strong>resolve</strong>：其中<strong>extensions</strong>，定义自动添加打包文件的扩展名。其中还可以定义<strong>alias</strong>，表示别名，比如<strong>alias: { jquery: jqeury.min.js }</strong>引入外部文件<strong>jQuery</strong>。</p>
<p><strong>externals</strong>: 引用外部挂载，比如</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">externals</span>: &#123;</div><div class="line">    <span class="string">'jquery'</span>: <span class="string">'jQuery'</span>        <span class="comment">// 对应全局变量 jQuery   在html中引入cdn的jquery文件即可</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>而在开发过程中，修改代码希望时时看到页面变化，方便开发展开，这时候需要用到<strong><em>webpack-dev-server</em></strong>插件。</p>
<p><strong>webpack</strong>文件中主要变化如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">entry: &#123;</div><div class="line">  <span class="attr">index</span>: [</div><div class="line">    <span class="string">'webpack-dev-server/client?http://127.0.0.1:8000'</span>,</div><div class="line">    <span class="string">'webpack/hot/only-dev-server'</span>,</div><div class="line">    <span class="built_in">require</span>.resolve(<span class="string">'./config/polyfills'</span>),</div><div class="line">    <span class="string">"./src/index.js"</span>, </div><div class="line">  ],</div><div class="line">  <span class="attr">vendor</span>: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'react-router'</span>, <span class="string">'react-router-dom'</span>]</div><div class="line">&#125;,</div><div class="line"><span class="comment">//文件输出配置</span></div><div class="line">output: &#123;</div><div class="line">  <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'../public/pc'</span>),   <span class="comment">//打包输出目录</span></div><div class="line">  publicPath: <span class="string">'http://127.0.0.1:8000/pc'</span>,</div><div class="line">  <span class="attr">filename</span>: <span class="string">'js/[name].[hash:8].js'</span>,</div><div class="line">  <span class="attr">chunkFilename</span>: <span class="string">'js/[id].chunk.[hash:8].js'</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p> 首先要在入口加入<strong>webpack-dev-server</strong>的入口，在出口，<strong>publicPath</strong>可以写成绝对的<strong>url</strong>路径，开发模式下，启动后直接访问<strong>url</strong>即可看到页面。</p>
<p>然后，需要创建新的启动文件，<strong>webpack.server.js</strong>，如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> WebpackDevServer = <span class="built_in">require</span>(<span class="string">'webpack-dev-server'</span>);</div><div class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'./webpack.config'</span>);</div><div class="line"></div><div class="line"><span class="keyword">new</span> WebpackDevServer(webpack(config), &#123;</div><div class="line">  <span class="attr">publicPath</span>: config.output.publicPath,</div><div class="line">  <span class="attr">hot</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">historyApiFallback</span>: <span class="literal">true</span></div><div class="line">&#125;).listen(<span class="number">8000</span>, <span class="string">'127.0.0.1'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (err) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Listening at http://127.0.0.1:8000/'</span>)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>直接使用<strong>webpack-dev-server</strong>插件运<strong>webpack</strong>配置文件即可。</p>
<p>为了方便开发和生产，在<strong>package.json</strong>文件中，配置<strong>script</strong>项，实现控制台的命令分别执行开发和生产打包的过程。如下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"script"</span>: &#123;</div><div class="line">    <span class="attr">"dev"</span>: <span class="string">"node webpack.server.js"</span>,</div><div class="line">    <span class="attr">"build"</span>: <span class="string">"webpack"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在控制台直接使用<strong>npm</strong>命令操作。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">run</span><span class="bash"> dev    // 开发，访问http://127.0.0.1:8000时时看页面变化</span></div><div class="line">npm <span class="keyword">run</span><span class="bash"> build  // 生产打包，在规定output path目录生成打包后文件</span></div></pre></td></tr></table></figure>

  </div>
</article>
    </main>
    <div>
	<canvas id="background-canvas"></canvas>
</div>
  </body>
</html>